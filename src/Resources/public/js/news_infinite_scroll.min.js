!function(n){ContaoNewsInfiniteScroll=function(o){var e=n.extend({newsContainer:".mod_newslist_infinite_scroll",scrollContainer:n(window),paginationLinks:".pagination .link",loadAllOnDomready:!1,loadMoreButton:!0,loadMoreButtonMarkup:"<div><button>Load more</button></div>",anchorPoint:".mod_newslist_infinite_scroll",bottomPixels:0,fadeInTime:800,loadingInProcessContainer:'<div class="inf-scr-loading-in-process-container"><em>Loading...</em></div>',onInitialize:function(n){},onXHRStart:function(n){},onXHRComplete:function(n,o){return n},onXHRFail:function(n){},onAppendCallback:function(n){}},o||{}),t=this,r=null,i=null,l=null,a=0,s=[],d=0,c=0;t.blnHasError=!1,t.currentUrl="",t.urlIndex=0,t.response="",t.loadMoreBtn=null,this.getOption=function(n){return void 0!==e[n]&&e[n]};var u=function(){1!=a&&1!=d&&(t.blnHasError=!1,t.currentUrl=s[t.urlIndex],void 0!==t.currentUrl?n.ajax({url:t.currentUrl,beforeSend:function(){e.onXHRStart(t),n(r).attr("aria-busy","true"),a=1,""!=e.loadingInProcessContainer&&n(e.loadingInProcessContainer).addClass("inf-scr-loading-in-process-container").insertAfter(r).fadeIn(100)}}).done(function(n){t.blnHasError=!1,t.response=n;var o=e.onXHRComplete(t.response,t);!1===t.blnHasError?(t.urlIndex++,setTimeout(function(){p(o)},1e3)):f()}).fail(function(){f()}).always(function(){setTimeout(function(){n(".inf-scr-loading-in-process-container").remove(),n(r).attr("aria-busy","false"),s.length==t.urlIndex&&(d=1,t.loadMoreBtn.remove(),t.loadMoreBtn=null,void 0!==c&&clearInterval(c)),null!==t.loadMoreBtn&&t.loadMoreBtn.show(),a=0},1e3)}):(d=1,void 0!==c&&clearInterval(c)))},f=function(){a=0,e.onXHRFail(t)},p=function(o){n(o).hide().appendTo(r).fadeIn(e.fadeInTime),e.onAppendCallback(t)};!0===e.onInitialize(t)&&void 0!==(r=n(e.newsContainer)[0])&&(n(e.newsContainer+" "+e.paginationLinks).each(function(){s.push(n(this).prop("href"))}),void 0!==(l=n(e.scrollContainer)[0])?(0==e.bottomPixels&&(e.bottomPixels=1),i=n(r),void 0!==n(e.anchorPoint)[0]&&(i=n(e.anchorPoint)[0]),!0===e.loadAllOnDomready?(u(),c=setInterval(u,3e3)):!0===e.loadMoreButton?(t.loadMoreBtn=n(e.loadMoreButtonMarkup),t.loadMoreBtn.insertAfter(r),t.loadMoreBtn.addClass("inf-scr-load-more-btn-container"),t.loadMoreBtn.click(function(o){n(this).hide(),u()})):n(l).on("scroll",function(){n(l).scrollTop()>n(i).offset().top+n(i).innerHeight()-n(l).height()-e.bottomPixels&&u()})):console.log("ContaoNewsInfiniteScroll aborted! Please select a valid scroll container."))}}(jQuery);